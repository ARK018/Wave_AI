import React, { useState, useEffect } from "react";
import { Outlet, useNavigate } from "react-router-dom";
import Profile from "@/components/Profile";

const Dashboard = () => {
  const navigate = useNavigate();

  const [selected, setSelected] = useState("feature1");

  useEffect(() => {
    const selected = localStorage.getItem("selected");
    if (selected) {
      setSelected(selected);
    }
  }, []);

  const handleHomeClick = () => {
    navigate("/");
  };

  const handleLogoutClick = async () => {
    logoutUser();
    localStorage.removeItem("selected");
  };

  const handlefeature1 = () => {
    const newSelected = "feature1";
    setSelected(newSelected);
    localStorage.setItem("selected", newSelected);
    navigate("feature1");
  };

  const handlefeature2 = () => {
    const newSelected = "feature2";
    setSelected(newSelected);
    localStorage.setItem("selected", newSelected);
    navigate("feature2");
  };

  return (
    <div className="flex w-full relative bg-[#131315]">
      <div className="flex flex-col justify-between h-screen items-center top-0 sticky bg-[#131315] border-r border-white/10 px-4 py-6">
        <div onClick={handleHomeClick} className="cursor-pointer">
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M20.9008 6.68909C21.1924 6.68909 21.4729 6.7832 21.6791 6.95127C21.8854 7.11933 22.0009 7.3479 22.0009 7.58545V21.0309C22.0009 21.2684 21.8854 21.497 21.6791 21.665C21.4729 21.8331 21.1924 21.9272 20.9008 21.9272C20.2931 21.9272 19.8008 21.5261 19.8008 21.0309V7.58546C19.8008 7.09024 20.2931 6.68909 20.9008 6.68909Z"
              fill="#C4E456"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M12.5004 10.2748C12.792 10.2748 13.0725 10.3689 13.2788 10.537C13.485 10.705 13.6005 10.9336 13.6005 11.1711V18.3419C13.6005 18.5794 13.485 18.808 13.2788 18.9761C13.0725 19.1441 12.792 19.2382 12.5004 19.2382C11.8927 19.2382 11.4004 18.8371 11.4004 18.3419V11.1712C11.4004 10.6759 11.8927 10.2748 12.5004 10.2748Z"
              fill="#C4E456"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M25.101 12.0668C25.3925 12.0668 25.6731 12.1609 25.8793 12.329C26.0856 12.497 26.2011 12.7256 26.2011 12.9631V16.5485C26.2011 16.786 26.0856 17.0146 25.8793 17.1827C25.6731 17.3508 25.3926 17.4449 25.101 17.4449C24.4933 17.4449 24.001 17.0437 24.001 16.5485V12.9631C24.001 12.4679 24.4933 12.0668 25.101 12.0668Z"
              fill="#C4E456"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M8.30025 7.58521C8.59176 7.58521 8.87228 7.67932 9.07856 7.84739C9.28484 8.01545 9.40033 8.24402 9.40033 8.48156V21.0304C9.40033 21.2679 9.28482 21.4965 9.07856 21.6645C8.8723 21.8326 8.59179 21.9267 8.30025 21.9267C7.69247 21.9267 7.2002 21.5256 7.2002 21.0304V8.48158C7.2002 7.98635 7.69247 7.58521 8.30025 7.58521Z"
              fill="#C4E456"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M4.10006 12.0668C4.39157 12.0668 4.67208 12.1609 4.87837 12.329C5.08465 12.497 5.20013 12.7256 5.20013 12.9631V16.5485C5.20013 16.786 5.08463 17.0146 4.87837 17.1827C4.67211 17.3508 4.39159 17.4449 4.10006 17.4449C3.49228 17.4449 3 17.0437 3 16.5485V12.9631C3 12.4679 3.49228 12.0668 4.10006 12.0668Z"
              fill="#C4E456"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M16.7006 4C16.9922 4 17.2727 4.09411 17.479 4.26218C17.6852 4.43024 17.8007 4.65881 17.8007 4.89636V24.6159C17.8007 24.8534 17.6852 25.082 17.479 25.2501C17.2727 25.4181 16.9922 25.5122 16.7006 25.5122C16.0929 25.5122 15.6006 25.1111 15.6006 24.6159V4.89638C15.6006 4.40115 16.0929 4 16.7006 4Z"
              fill="#C4E456"
            />
          </svg>
        </div>

        {/* Nav Links */}
        <div className="flex flex-col items-center gap-6">
          <div
            className={`p-2 cursor-pointer rounded-md`}
            onClick={handlefeature1}
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.3714 4.00004C9.3714 3.73482 9.47676 3.48047 9.66429 3.29293C9.85183 3.1054 10.1062 3.00004 10.3714 3.00004H22.2584C22.5236 3.00004 22.778 3.1054 22.9655 3.29293C23.153 3.48047 23.2584 3.73482 23.2584 4.00004C23.2584 4.26526 23.153 4.51961 22.9655 4.70715C22.778 4.89468 22.5236 5.00004 22.2584 5.00004H10.3714C10.1062 5.00004 9.85183 4.89468 9.66429 4.70715C9.47676 4.51961 9.3714 4.26526 9.3714 4.00004ZM5.4894 1.28204L2.9824 4.46304L2.2064 3.43804C2.12715 3.33298 2.02798 3.24456 1.91455 3.17783C1.80113 3.1111 1.67567 3.06736 1.54535 3.04911C1.41502 3.03087 1.28238 3.03847 1.15499 3.07149C1.0276 3.1045 0.907958 3.16229 0.802901 3.24154C0.697843 3.32079 0.609425 3.41996 0.542693 3.53338C0.475961 3.64681 0.432223 3.77227 0.413976 3.90259C0.39573 4.03292 0.403332 4.16556 0.436348 4.29295C0.469364 4.42034 0.527148 4.53998 0.606401 4.64504L2.1684 6.70004C2.26032 6.82263 2.37919 6.92245 2.51582 6.99181C2.65245 7.06116 2.80319 7.09819 2.9564 7.10004H2.9664C3.11753 7.09998 3.26669 7.06567 3.40265 6.99968C3.53861 6.93369 3.65785 6.83774 3.7514 6.71904L7.0594 2.51904C7.14075 2.41595 7.20101 2.29785 7.23672 2.17148C7.27243 2.0451 7.2829 1.91293 7.26753 1.78251C7.25216 1.65209 7.21126 1.52598 7.14715 1.41137C7.08304 1.29675 6.99699 1.19589 6.8939 1.11454C6.79081 1.03318 6.67271 0.972932 6.54634 0.937221C6.41996 0.901509 6.28779 0.891039 6.15737 0.906407C6.02695 0.921776 5.90084 0.962681 5.78623 1.02679C5.67162 1.0909 5.57076 1.17695 5.4894 1.28004V1.28204ZM22.2584 11H10.3714C10.1062 11 9.85183 11.1054 9.66429 11.2929C9.47676 11.4805 9.3714 11.7348 9.3714 12C9.3714 12.2653 9.47676 12.5196 9.66429 12.7071C9.85183 12.8947 10.1062 13 10.3714 13H22.2584C22.5236 13 22.778 12.8947 22.9655 12.7071C23.153 12.5196 23.2584 12.2653 23.2584 12C23.2584 11.7348 23.153 11.4805 22.9655 11.2929C22.778 11.1054 22.5236 11 22.2584 11ZM22.2584 19H10.3714C10.1062 19 9.85183 19.1054 9.66429 19.2929C9.47676 19.4805 9.3714 19.7348 9.3714 20C9.3714 20.2653 9.47676 20.5196 9.66429 20.7071C9.85183 20.8947 10.1062 21 10.3714 21H22.2584C22.5236 21 22.778 20.8947 22.9655 20.7071C23.153 20.5196 23.2584 20.2653 23.2584 20C23.2584 19.7348 23.153 19.4805 22.9655 19.2929C22.778 19.1054 22.5236 19 22.2584 19ZM6.9404 12C6.9404 12.6132 6.75859 13.2125 6.41796 13.7223C6.07732 14.2321 5.59317 14.6294 5.02672 14.8641C4.46027 15.0987 3.83696 15.1601 3.23562 15.0405C2.63428 14.9209 2.08191 14.6256 1.64837 14.1921C1.21483 13.7585 0.919581 13.2062 0.799967 12.6048C0.680352 12.0035 0.741743 11.3802 0.976374 10.8137C1.21101 10.2473 1.60834 9.76312 2.11813 9.42248C2.62793 9.08185 3.22728 8.90004 3.8404 8.90004C4.66257 8.90004 5.45107 9.22665 6.03243 9.80801C6.61379 10.3894 6.9404 11.1779 6.9404 12ZM4.9404 12C4.9404 11.7825 4.87589 11.5698 4.75502 11.3889C4.63415 11.208 4.46235 11.067 4.26135 10.9838C4.06035 10.9005 3.83918 10.8787 3.6258 10.9212C3.41242 10.9636 3.21642 11.0684 3.06258 11.2222C2.90875 11.3761 2.80398 11.5721 2.76154 11.7854C2.71909 11.9988 2.74088 12.22 2.82413 12.421C2.90739 12.622 3.04838 12.7938 3.22927 12.9147C3.41017 13.0355 3.62284 13.1 3.8404 13.1C3.98485 13.1 4.12789 13.0716 4.26135 13.0163C4.39481 12.961 4.51607 12.88 4.61822 12.7779C4.72036 12.6757 4.80139 12.5544 4.85667 12.421C4.91195 12.2875 4.9404 12.1445 4.9404 12ZM6.9404 20C6.9404 20.6132 6.75859 21.2125 6.41796 21.7223C6.07732 22.2321 5.59317 22.6294 5.02672 22.8641C4.46027 23.0987 3.83696 23.1601 3.23562 23.0405C2.63428 22.9209 2.08191 22.6256 1.64837 22.1921C1.21483 21.7585 0.919581 21.2062 0.799967 20.6048C0.680352 20.0035 0.741743 19.3802 0.976374 18.8137C1.21101 18.2473 1.60834 17.7631 2.11813 17.4225C2.62793 17.0818 3.22728 16.9 3.8404 16.9C4.66257 16.9 5.45107 17.2266 6.03243 17.808C6.61379 18.3894 6.9404 19.1779 6.9404 20ZM4.9404 20C4.9404 19.7825 4.87589 19.5698 4.75502 19.3889C4.63415 19.208 4.46235 19.067 4.26135 18.9838C4.06035 18.9005 3.83918 18.8787 3.6258 18.9212C3.41242 18.9636 3.21642 19.0684 3.06258 19.2222C2.90875 19.3761 2.80398 19.5721 2.76154 19.7854C2.71909 19.9988 2.74088 20.22 2.82413 20.421C2.90739 20.622 3.04838 20.7938 3.22927 20.9147C3.41017 21.0355 3.62284 21.1 3.8404 21.1C3.98485 21.1 4.12789 21.0716 4.26135 21.0163C4.39481 20.961 4.51607 20.88 4.61822 20.7779C4.72036 20.6757 4.80139 20.5544 4.85667 20.421C4.91195 20.2875 4.9404 20.1445 4.9404 20Z"
                fill={selected === "feature1" ? "#c4e456" : "#6b7280"}
              />
            </svg>
          </div>
          <div
            className={`flex justify-center items-center p-2 cursor-pointer rounded-md`}
            onClick={handlefeature2}
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.26855 0.25H3.23145C1.2251 0.25 0.25 1.18164 0.25 3.09961V18.9004C0.25 20.8184 1.2251 21.75 3.23145 21.75H7.26855C9.2749 21.75 10.25 20.8184 10.25 18.9004V3.09961C10.25 1.18164 9.2749 0.25 7.26855 0.25ZM8.75 18.9004C8.75 19.9131 8.53564 20.25 7.26855 20.25H3.23145C1.96436 20.25 1.75 19.9131 1.75 18.9004V3.09961C1.75 2.08691 1.96436 1.75 3.23145 1.75H7.26855C8.53564 1.75 8.75 2.08691 8.75 3.09961V18.9004ZM18.7686 0.25H14.7314C12.7251 0.25 11.75 1.18164 11.75 3.09961V11.9004C11.75 13.8184 12.7251 14.75 14.7314 14.75H18.7686C20.7749 14.75 21.75 13.8184 21.75 11.9004V3.09961C21.75 1.18164 20.7749 0.25 18.7686 0.25ZM20.25 11.9004C20.25 12.9131 20.0356 13.25 18.7686 13.25H14.7314C13.4644 13.25 13.25 12.9131 13.25 11.9004V3.09961C13.25 2.08691 13.4644 1.75 14.7314 1.75H18.7686C20.0356 1.75 20.25 2.08691 20.25 3.09961V11.9004Z"
                fill={selected === "feature2" ? "#c4e456" : "#6b7280"}
              />
            </svg>
          </div>
        </div>

        {/* User */}
        <Profile />
      </div>

      <Outlet />
    </div>
  );
};

export default Dashboard;
